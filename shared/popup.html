<!DOCTYPE html>
<html>
<head>
    <title>Open Headers</title>
    <link rel="stylesheet" href="popup.css" />
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
<h1>Open Headers</h1>

<div class="inputSection">
    <div class="inputRow">
        <span class="label">Header Name:</span>
        <input type="text" id="headerNameInput" list="commonHeaders" />
        <datalist id="commonHeaders">
            <option value="Accept"></option>
            <option value="Accept-Encoding"></option>
            <option value="Accept-Language"></option>
            <option value="Authorization"></option>
            <option value="Cache-Control"></option>
            <option value="Content-Length"></option>
            <option value="Content-Type"></option>
            <option value="Cookie"></option>
            <option value="Host"></option>
            <option value="Origin"></option>
            <option value="Referer"></option>
            <option value="User-Agent"></option>
        </datalist>
    </div>

    <div class="inputRow">
        <span class="label">Value Type:</span>
        <select id="valueTypeSelect">
            <option value="static">Static</option>
            <option value="dynamic">Dynamic</option>
        </select>
    </div>

    <div id="staticValueRow" class="inputRow">
        <span class="label">Header Value:</span>
        <input type="text" id="headerValueInput" />
    </div>

    <div id="dynamicValueRow" class="inputRow" style="display: none;">
        <span class="label">Select Source:</span>
        <select id="dynamicValueSelect">
            <option value="">-- Select a source --</option>
            <!-- Options will be populated from WebSocket data -->
        </select>
    </div>

    <div id="dynamicPrefixSuffixRow" class="inputRow" style="display: none;">
        <span class="label">Format:</span>
        <div class="prefixSuffixContainer">
            <div class="prefixInputWrapper">
                <span class="inputLabel">Prefix:</span>
                <input type="text" id="prefixInput" placeholder="example: Bearer " />
            </div>
            <div class="dynamicValueIndicator">
                <span>Source Value</span>
            </div>
            <div class="suffixInputWrapper">
                <span class="inputLabel">Suffix:</span>
                <input type="text" id="suffixInput" placeholder="example: .v1" />
            </div>
        </div>
    </div>

    <div class="inputRow">
        <span class="label">Domains:</span>
        <div class="domainInputContainer">
            <div class="tagInput">
                <div id="domainTags" class="tagContainer"></div>
                <input type="text" id="domainInput" placeholder="Add domain urls or patterns (*.example.com)" />
            </div>
            <div class="domainHelp">
                <i class="fas fa-info-circle"></i>
                <span class="domainHelpText">Separate multiple domains with Enter or comma. Use * as wildcard.</span>
            </div>
        </div>
    </div>

    <button id="saveButton">Save</button>
</div>

<div class="actionButtons">
    <button id="exportConfigButton" title="Export current configuration to a JSON file">
        <i class="fas fa-file-export"></i> Export
    </button>
    <button id="importConfigButton" title="Import configuration from a JSON file">
        <i class="fas fa-file-import"></i> Import
    </button>
    <input type="file" id="configFileInput" accept=".json" style="display: none;" />
</div>

<div class="entriesContainer">
    <!-- Column Headers -->
    <div class="entriesHeader">
        <span>Type</span>
        <span>Header Name</span>
        <span>Header Value</span>
        <span>Domains</span>
        <span>Source Details</span>
        <span></span>
    </div>
    <div id="entriesList"></div>
</div>

<!-- Footer with social links -->
<footer class="footer">
    <div class="app-info">
        <div class="app-features">
            <span class="feature-text"><b>Dynamic sources</b>: HTTP Requests, Environment Variables, Files</span>
            <span class="feature-text">Content auto-refresh on source changes or user defined timers</span>
        </div>
        <div class="connecting-arrow">
            <i class="fas fa-long-arrow-alt-right"></i>
        </div>
        <div class="download-section">
            <p class="download-label">Download app:</p>
            <div class="download-links">
                <a href="https://github.com/OpenHeaders/open-headers-app/releases" target="_blank" title="Download for macOS">
                    <i class="fab fa-apple"></i>
                </a>
                <a href="https://github.com/OpenHeaders/open-headers-app/releases" target="_blank" title="Download for Windows">
                    <i class="fab fa-windows"></i>
                </a>
                <a href="https://github.com/OpenHeaders/open-headers-app/releases" target="_blank" title="Download for Linux">
                    <i class="fab fa-linux"></i>
                </a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="social-links">
            <a href="https://github.com/OpenHeaders/open-headers-browser-extension" target="_blank" title="GitHub Repository">
                <i class="fab fa-github"></i>
            </a>
        </div>
        <div class="footer-text">
            Open Headers | Version 1.1.2
        </div>
    </div>
</footer>

<!-- Use a module script tag to load our JavaScript modules -->
<script type="module" src="js/popup/index.js"></script>
</body>
</html>